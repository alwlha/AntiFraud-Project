# === Task 配置文件 ===
# 定义 CrewAI 的任务流（按顺序执行）

monitor_task:
  description: |
    分析以下通话转录文本，识别诈骗信号：
    
    【转录文本】
    {transcript_text}
    
    请完成以下任务：
    1. 扫描文本中的高危关键词（验证码、转账、公检法、征信等）
    2. 识别情绪压力信号（必须、立即、否则、后果严重）
    3. 检测身份伪装迹象（自称警官/客服/领导）
    4. 评估风险等级：Safe / Medium / High / Critical
    
    输出格式（严格遵守）：
    ```
    风险等级: [等级]
    触发关键词: [列出发现的关键词]
    可疑片段: [标记1-3处最可疑的对话片段]
    ```
  
  expected_output: |
    风险等级及关键词列表，格式化输出包含：
    - 风险等级（Safe/Medium/High/Critical）
    - 触发的敏感关键词
    - 标记的可疑对话片段

profile_task:
  description: |
    基于监控专家的初步判断，使用 RAG 知识库检索相似案例，识别诈骗类型。
    
    【监控结果】
    {monitor_result}
    
    【原始转录】
    {transcript_text}
    
    请完成以下任务：
    1. 使用 RAG 工具检索与此对话最相似的历史案例
    2. 匹配诈骗类型（如：冒充公检法、虚假客服、AI换脸等）
    3. 分析骗子使用的核心话术和施压技巧
    4. 引用至少 1 个相似历史案例作为证据
    
    输出格式（严格遵守）：
    ```
    诈骗类型: [类型名称]
    典型特征: [列出该类型的3-5个核心特征]
    历史案例: [引用检索到的相似案例]
    置信度: [High/Medium/Low]
    ```
  
  expected_output: |
    诈骗类型识别结果，包含：
    - 诈骗类型名称
    - 典型特征描述
    - 相似历史案例引用
    - 判断置信度

defend_task:
  description: |
    根据受害者画像和识别的诈骗类型，生成个性化防御建议。
    
    【受害者信息】
    姓名: {victim_name}
    年龄: {victim_age}
    标签: {victim_tag}
    心理弱点: {victim_weakness}
    
    【监控结果】
    {monitor_result}
    
    【诈骗类型】
    {profile_result}
    
    请完成以下任务：
    1. 生成立即行动建议（考虑受害者的年龄和认知水平）
    2. 设计 2-3 个验证问题来戳穿骗局
    3. 提供简单易懂的科普解释（为什么这是诈骗）
    4. 如果是高危情况，强调报警
    
    输出格式（严格遵守）：
    ```
    ### 🚨 立即行动
    [针对该受害者的具体建议，语气要符合其年龄特征]
    
    ### 🔍 验证问题
    1. [问题1]
    2. [问题2]
    
    ### 📚 防骗科普
    [用通俗语言解释为什么这是诈骗]
    
    ### ☎️ 报警建议
    [是否需要报警及报警理由]
    ```
  
  expected_output: |
    个性化防御方案，包含：
    - 立即行动建议
    - 验证问题列表
    - 通俗易懂的科普解释
    - 报警建议
